[{"id":"584a5882.235cf8","type":"tab","label":"MQTT Konsole","disabled":false,"info":""},{"id":"8d2fdd3e.1a9b1","type":"tab","label":"stepper","disabled":true,"info":""},{"id":"d817750.1785d88","type":"tab","label":"stepper prg1","disabled":false,"info":""},{"id":"8f771a67.ce1c88","type":"tab","label":"Flow 1","disabled":false,"info":""},{"id":"3ca10133.d4a53e","type":"tab","label":"dcmotor1","disabled":false,"info":""},{"id":"c5819a96.39f7d8","type":"tab","label":"dcmotor2","disabled":false,"info":""},{"id":"7f002a1.65477d4","type":"tab","label":"servo & IR","disabled":false,"info":""},{"id":"f6015da6.313ed","type":"tab","label":"camera","disabled":false,"info":""},{"id":"5dde010c.81a4","type":"tab","label":"Programme 1","disabled":false,"info":""},{"id":"41e722ef.1e830c","type":"tab","label":"GUI","disabled":false,"info":""},{"id":"e8dd3d9d.43313","type":"subflow","name":"Subflow 1","info":"","in":[],"out":[]},{"id":"d23060fe.99aa1","type":"ui_base","theme":{"name":"theme-dark","lightTheme":{"default":"#0094CE","baseColor":"#400040","baseFont":"Arial Black,Arial Black,Gadget,sans-serif","edited":true,"reset":false},"darkTheme":{"default":"#097479","baseColor":"#097479","baseFont":"Arial Black,Arial Black,Gadget,sans-serif","edited":true,"reset":false},"customTheme":{"name":"Untitled Theme 1","default":"#4B7930","baseColor":"#4B7930","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","reset":false},"themeState":{"base-color":{"default":"#097479","value":"#097479","edited":true},"page-titlebar-backgroundColor":{"value":"#097479","edited":false},"page-backgroundColor":{"value":"#111111","edited":false},"page-sidebar-backgroundColor":{"value":"#000000","edited":false},"group-textColor":{"value":"#0eb8c0","edited":false},"group-borderColor":{"value":"#555555","edited":false},"group-backgroundColor":{"value":"#333333","edited":false},"widget-textColor":{"value":"#eeeeee","edited":false},"widget-backgroundColor":{"value":"#097479","edited":false},"widget-borderColor":{"value":"#333333","edited":false},"base-font":{"value":"Arial Black,Arial Black,Gadget,sans-serif"}},"angularTheme":{"primary":"indigo","accents":"blue","warn":"red","background":"grey"}},"site":{"name":"PDP Dashboard","hideToolbar":"false","allowSwipe":"false","lockMenu":"false","allowTempTheme":"true","dateFormat":"DD/MM/YYYY","sizes":{"sx":48,"sy":48,"gx":6,"gy":6,"cx":6,"cy":6,"px":0,"py":0}}},{"id":"9d54781e.82cff8","type":"ui_tab","z":"","name":"Home","icon":"all_out","order":2,"disabled":true,"hidden":false},{"id":"eb26bc07.ee25f","type":"mqtt-broker","z":"","name":"pdp","broker":"localhost","port":"1883","clientid":"","usetls":false,"compatmode":true,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"1014ab3.1619155","type":"ui_group","z":"","name":"Stepper","tab":"9d54781e.82cff8","order":2,"disp":true,"width":"5","collapse":false},{"id":"a39175e6.3c3778","type":"ui_group","z":"","name":"DC Motor 1","tab":"9d54781e.82cff8","order":3,"disp":true,"width":"5","collapse":false},{"id":"842ecb84.59eb98","type":"ui_group","z":"584a5882.235cf8","name":"MQTT Console","disp":true,"width":"12"},{"id":"132e16b3.aae989","type":"ui_group","z":"","name":"MQTT Konsole","tab":"9d54781e.82cff8","order":1,"disp":true,"width":"6","collapse":false},{"id":"835d5e0f.9a22d","type":"ui_group","z":"584a5882.235cf8","name":"MQTT Console","disp":true,"width":"12"},{"id":"a98b67a2.f023a8","type":"ui_group","z":"","name":"DC Motor 2","tab":"9d54781e.82cff8","order":5,"disp":true,"width":"5","collapse":false},{"id":"3ffd1743.99a448","type":"ui_group","z":"","name":"Camera","tab":"9d54781e.82cff8","disp":true,"width":"6","collapse":false},{"id":"c89fbd89.04161","type":"ui_group","z":"","name":"Steuerung","tab":"72be196d.b7e8b8","order":3,"disp":true,"width":"10","collapse":false},{"id":"d75718a5.d4f158","type":"ui_group","z":"","name":"CSS","tab":"72be196d.b7e8b8","order":1,"disp":false,"width":"2","collapse":false},{"id":"1c8a0807.68bbe8","type":"ui_group","z":"","name":"Status","tab":"72be196d.b7e8b8","order":2,"disp":true,"width":"10","collapse":false},{"id":"d8a12027.2009b","type":"ui_group","z":"","name":"Analyse","tab":"72be196d.b7e8b8","order":4,"disp":true,"width":"10","collapse":false},{"id":"72be196d.b7e8b8","type":"ui_tab","z":"","name":"GUI","icon":"dashboard","order":1,"disabled":false,"hidden":false},{"id":"38d6543.82816ac","type":"ui_spacer","name":"spacer","group":"c89fbd89.04161","order":5,"width":"10","height":1},{"id":"b4a386de.f10708","type":"camerapi-takephoto","z":"f6015da6.313ed","filemode":"2","filename":"test.jpg","filedefpath":"1","filepath":"","fileformat":"jpeg","resolution":"3","rotation":"0","fliph":"0","flipv":"0","brightness":"50","contrast":"0","sharpness":"0","quality":"80","imageeffect":"none","exposuremode":"auto","iso":"400","agcwait":"1.0","led":"1","awb":"auto","name":"","x":520,"y":220,"wires":[["7147324f.ca043c"]]},{"id":"22556f7b.9e463","type":"ui_button","z":"f6015da6.313ed","name":"","group":"3ffd1743.99a448","order":2,"width":"4","height":"1","passthru":false,"label":"Take Photo","tooltip":"macht ein Foto","color":"","bgcolor":"","icon":"","payload":"1","payloadType":"num","topic":"","x":330,"y":220,"wires":[["b4a386de.f10708"]]},{"id":"b27ca249.61849","type":"ui_template","z":"f6015da6.313ed","group":"3ffd1743.99a448","name":"Foto","order":3,"width":"6","height":"5","format":"<img src={{msg.payload}}\n width='400' \n height='300' \n id='img'\n alt='Getting Image'\n>","storeOutMessages":true,"fwdInMessages":false,"templateScope":"local","x":1250,"y":220,"wires":[[]]},{"id":"7147324f.ca043c","type":"change","z":"f6015da6.313ed","name":"","rules":[{"t":"change","p":"payload","pt":"msg","from":"/home/pi/Pictures/","fromt":"str","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":740,"y":220,"wires":[["3a90e6a.4173d1a"]]},{"id":"e0412ceb.60541","type":"function","z":"f6015da6.313ed","name":"img url","func":"msg.payload = \"http://\"+msg.payload[0].address+\":1880/Pictures/\"+msg.filename;\n\nreturn msg;","outputs":1,"noerr":0,"x":1110,"y":220,"wires":[["b27ca249.61849"]]},{"id":"aa0511b5.9fbeb","type":"ui_switch","z":"8d2fdd3e.1a9b1","name":"","label":"Stepper Jog/Off","tooltip":"","group":"1014ab3.1619155","order":2,"width":"0","height":"0","passthru":true,"decouple":"false","topic":"pdp/stepper","style":"","onvalue":"true","onvalueType":"bool","onicon":"power_settings_new","oncolor":"green","offvalue":"false","offvalueType":"bool","officon":"power_settings_new","offcolor":"red","x":860,"y":300,"wires":[["73c47cd3.8d4564"]]},{"id":"8515c817.ae0f28","type":"change","z":"8d2fdd3e.1a9b1","name":"Jog","rules":[{"t":"set","p":"payload","pt":"msg","to":"{\"dir\":\"cw\",\"mode\":\"jog\"}","tot":"json"},{"t":"set","p":"topic","pt":"msg","to":"pdp/stepper","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1190,"y":300,"wires":[["59a90cea.812664"]]},{"id":"4bbf6357.062e4c","type":"change","z":"8d2fdd3e.1a9b1","name":"Stop","rules":[{"t":"set","p":"payload","pt":"msg","to":"{\"mode\":\"stop\"}","tot":"json"},{"t":"set","p":"topic","pt":"msg","to":"pdp/stepper","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1310,"y":200,"wires":[["9e28f7fa.71b118"]]},{"id":"9e28f7fa.71b118","type":"mqtt out","z":"8d2fdd3e.1a9b1","name":"","topic":"","qos":"0","retain":"","broker":"eb26bc07.ee25f","x":1730,"y":300,"wires":[]},{"id":"b94220fc.0ab4a","type":"ui_form","z":"8d2fdd3e.1a9b1","name":"Steps Eingabe","label":"","group":"1014ab3.1619155","order":3,"width":0,"height":0,"options":[{"label":"Steps","value":"steps","type":"number","required":true}],"formValue":{"steps":""},"payload":"","submit":"submit","cancel":"cancel","topic":"pdp/stepper","x":480,"y":300,"wires":[["ed73f275.4db9c"]]},{"id":"73c47cd3.8d4564","type":"function","z":"8d2fdd3e.1a9b1","name":"Off/On","func":"var steps = flow.get(\"steps\");\n\nif (msg.payload === false) {\n    return [msg,null,null];\n} else if (steps !== true) {\n    return [null,msg,null];\n} else if (steps === true) {\n    flow.set(\"steps\", false);\n    return [null,null,msg];\n}","outputs":3,"noerr":0,"x":1050,"y":300,"wires":[["4bbf6357.062e4c"],["8515c817.ae0f28"],["d7d54e3b.a0a91"]]},{"id":"d7d54e3b.a0a91","type":"change","z":"8d2fdd3e.1a9b1","name":"Move","rules":[{"t":"set","p":"topic","pt":"msg","to":"pdp/stepper","tot":"str"},{"t":"set","p":"payload","pt":"msg","to":"{\"dir\":\"ccw\",\"mode\":\"move\",\"steps\":0}","tot":"json"},{"t":"set","p":"payload.steps","pt":"msg","to":"move","tot":"flow"}],"action":"","property":"","from":"","to":"","reg":false,"x":1250,"y":440,"wires":[["891f02e1.2fb1d"]]},{"id":"ed73f275.4db9c","type":"change","z":"8d2fdd3e.1a9b1","name":"steps = true","rules":[{"t":"set","p":"steps","pt":"flow","to":"true","tot":"bool"},{"t":"set","p":"move","pt":"flow","to":"payload.steps","tot":"msg"},{"t":"set","p":"payload","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":670,"y":300,"wires":[["aa0511b5.9fbeb"]]},{"id":"f0d22d96.1585c","type":"mqtt in","z":"8d2fdd3e.1a9b1","name":"","topic":"pdp/stepper","qos":"2","datatype":"auto","broker":"eb26bc07.ee25f","x":470,"y":400,"wires":[["832b0d01.0de03"]]},{"id":"832b0d01.0de03","type":"function","z":"8d2fdd3e.1a9b1","name":"off -> false","func":"if (msg.payload === \"off\") {\n    msg.payload = false;\n    return msg;\n}","outputs":1,"noerr":0,"x":670,"y":400,"wires":[["aa0511b5.9fbeb"]]},{"id":"f0c2ff0a.050ac","type":"ui_switch","z":"3ca10133.d4a53e","name":"","label":"DC1 On/Off","tooltip":"","group":"a39175e6.3c3778","order":5,"width":"0","height":"0","passthru":true,"decouple":"false","topic":"pdp/dcmotor1","style":"","onvalue":"true","onvalueType":"bool","onicon":"power_settings_new","oncolor":"green","offvalue":"false","offvalueType":"bool","officon":"power_settings_new","offcolor":"red","x":550,"y":540,"wires":[["c445a6b0.d278a8"]]},{"id":"c445a6b0.d278a8","type":"function","z":"3ca10133.d4a53e","name":"Off/On","func":"if (msg.payload === true) {\n    return [msg,null];\n} else if (msg.payload === false) {\n    return [null,msg];\n}","outputs":2,"noerr":0,"x":750,"y":540,"wires":[["25653c24.9f9a94"],["967afd1.8524"]]},{"id":"25653c24.9f9a94","type":"change","z":"3ca10133.d4a53e","name":"On","rules":[{"t":"set","p":"payload","pt":"msg","to":"{\"dir\":\"cw\",\"speed\":20,\"acc\":2.5,\"mode\":\"start\"}","tot":"json"},{"t":"set","p":"payload.speed","pt":"msg","to":"speed","tot":"flow"},{"t":"set","p":"payload.acc","pt":"msg","to":"acc","tot":"flow"},{"t":"set","p":"payload.dir","pt":"msg","to":"dir","tot":"flow"}],"action":"","property":"","from":"","to":"","reg":false,"x":890,"y":500,"wires":[["94f85750.2f3608"]]},{"id":"967afd1.8524","type":"change","z":"3ca10133.d4a53e","name":"Off","rules":[{"t":"set","p":"payload","pt":"msg","to":"{\"speed\":0,\"mode\":\"stop\"}","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":890,"y":560,"wires":[["94f85750.2f3608"]]},{"id":"94f85750.2f3608","type":"mqtt out","z":"3ca10133.d4a53e","name":"","topic":"","qos":"0","retain":"","broker":"eb26bc07.ee25f","x":1110,"y":560,"wires":[]},{"id":"e948604.62ea8a","type":"ui_slider","z":"3ca10133.d4a53e","name":"speed","label":"Speed:","tooltip":"","group":"a39175e6.3c3778","order":1,"width":0,"height":0,"passthru":false,"outs":"end","topic":"pdp/dcmotor1","min":"0","max":"100","step":"1","x":530,"y":240,"wires":[["3586869c.c1bfba"]],"inputLabels":["msg.payload.speed"]},{"id":"cac7b829.a50818","type":"ui_gauge","z":"3ca10133.d4a53e","name":"","group":"a39175e6.3c3778","order":13,"width":0,"height":0,"gtype":"gage","title":"Geschwindigkeit:","label":"%","format":"{{value}}","min":0,"max":"100","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":570,"y":140,"wires":[]},{"id":"92f36e86.3a6f2","type":"comment","z":"8d2fdd3e.1a9b1","name":"Stepper","info":"","x":110,"y":60,"wires":[]},{"id":"ebdb7a0c.e87dc8","type":"comment","z":"3ca10133.d4a53e","name":"DC Motor 1","info":"","x":130,"y":60,"wires":[]},{"id":"c516c76f.5e5e78","type":"mqtt in","z":"584a5882.235cf8","name":"","topic":"pdp/#","qos":"2","datatype":"auto","broker":"eb26bc07.ee25f","x":190,"y":200,"wires":[["e81d1352.62611","d02085fa.866e68"]]},{"id":"e81d1352.62611","type":"debug","z":"584a5882.235cf8","name":"MQTT # RAW","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":800,"y":200,"wires":[]},{"id":"d02085fa.866e68","type":"function","z":"584a5882.235cf8","name":"Store and shift msg","func":"\n\n\n// initialise the counter to 0 if it doesn't exist already\nvar text = context.get('text')|| [];\n\ntext.push(msg);\nif (text.length > 20){\n    text.shift();\n    text.length = 20;\n} \n\n// store the value back\ncontext.set('text',text);\n// make it part of the outgoing msg object\nmsg = {};\nmsg.payload = text;\nreturn msg;\n","outputs":1,"noerr":0,"x":470,"y":260,"wires":[["495c82e3.78b43c","7d8af9ca.6fd9f8"]]},{"id":"495c82e3.78b43c","type":"debug","z":"584a5882.235cf8","name":"mqtt array","active":false,"console":"false","complete":"payload","x":780,"y":320,"wires":[]},{"id":"7d8af9ca.6fd9f8","type":"ui_template","z":"584a5882.235cf8","group":"132e16b3.aae989","name":"MQTT Output","order":1,"width":"6","height":"12","format":"<div style=\"overflow-x:hidden;overflow-y:auto;transform:rotate(180deg);direction:rtl;text-align:left\">\n<ul style=\"overflow:hidden;transform:rotate(180deg);\">\n <li style=\"display:inline;\" ng-repeat=\"x in msg.payload\">\n <font color=\"red\" style=\"font-family:lucida console;font-size:10px;\">{{x.topic}}</font>\n    <ul>\n        <p style=\"font-family:lucida console;font-size:9px;display:inline;\">{{x.payload}}</p>\n    </ul>\n </li>\n</ul>\n</div>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":800,"y":260,"wires":[[]]},{"id":"29a6a0cd.db619","type":"comment","z":"584a5882.235cf8","name":"MQTT Konsole","info":"This flow demonstrates how to view MQTT data\n\nIt is also a nice demonstration how you can\nuse an array to shift data into the UI template\n\n\nUI Viewable:\nhttp://localhost:1880/ui\n\nWritten by\nCory Guynn\n2016\nwww.InternetOfLEG0.com","x":120,"y":80,"wires":[]},{"id":"71553e39.99f83","type":"mqtt in","z":"3ca10133.d4a53e","name":"","topic":"pdp/dcmotor1","qos":"0","datatype":"json","broker":"eb26bc07.ee25f","x":130,"y":140,"wires":[["cc990fa0.68851"]]},{"id":"cc990fa0.68851","type":"change","z":"3ca10133.d4a53e","name":"query speed","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.speed","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":330,"y":140,"wires":[["cac7b829.a50818","e948604.62ea8a"]]},{"id":"3586869c.c1bfba","type":"change","z":"3ca10133.d4a53e","name":"flow.speed, flow.mode","rules":[{"t":"set","p":"speed","pt":"flow","to":"payload","tot":"msg"},{"t":"set","p":"mode","pt":"flow","to":"speed","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":240,"wires":[[]]},{"id":"95832fc.ac1c7d","type":"ui_slider","z":"3ca10133.d4a53e","name":"acc","label":"Beschleunigung:","tooltip":"","group":"a39175e6.3c3778","order":2,"width":0,"height":0,"passthru":false,"outs":"end","topic":"","min":"0","max":"3","step":"0.5","x":530,"y":300,"wires":[["38cd1687.c6166a"]],"inputLabels":["msg.payload.speed"]},{"id":"38cd1687.c6166a","type":"change","z":"3ca10133.d4a53e","name":"","rules":[{"t":"set","p":"acc","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":700,"y":300,"wires":[[]]},{"id":"7e6a28e3.60dea8","type":"ui_switch","z":"3ca10133.d4a53e","name":"dir","label":"Richtung:","tooltip":"","group":"a39175e6.3c3778","order":3,"width":"5","height":"1","passthru":false,"decouple":"false","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"update","oncolor":"green","offvalue":"false","offvalueType":"bool","officon":"restore","offcolor":"orange","x":530,"y":360,"wires":[["6b80e02.8b2b02"]]},{"id":"6b80e02.8b2b02","type":"switch","z":"3ca10133.d4a53e","name":"","property":"payload","propertyType":"msg","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":670,"y":360,"wires":[["cbc302bc.f8504"],["550ffa80.229664"]]},{"id":"cbc302bc.f8504","type":"change","z":"3ca10133.d4a53e","name":"","rules":[{"t":"set","p":"dir","pt":"flow","to":"cw","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":830,"y":340,"wires":[[]]},{"id":"550ffa80.229664","type":"change","z":"3ca10133.d4a53e","name":"","rules":[{"t":"set","p":"dir","pt":"flow","to":"ccw","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":830,"y":380,"wires":[[]]},{"id":"537c5c7.ba5b8a4","type":"comment","z":"7f002a1.65477d4","name":"Servo","info":"","x":110,"y":60,"wires":[]},{"id":"e3369ecb.fc287","type":"ui_button","z":"7f002a1.65477d4","name":"left","group":"1014ab3.1619155","order":8,"width":"1","height":"1","passthru":false,"label":"","tooltip":"","color":"","bgcolor":"","icon":"skip_previous","payload":"{\"mode\":\"left\"}","payloadType":"json","topic":"","x":170,"y":240,"wires":[["ac71139f.2a222"]]},{"id":"ac71139f.2a222","type":"mqtt out","z":"7f002a1.65477d4","name":"","topic":"pdp/servo","qos":"0","retain":"","broker":"eb26bc07.ee25f","x":370,"y":300,"wires":[]},{"id":"76e46a77.a62444","type":"ui_button","z":"7f002a1.65477d4","name":"center","group":"1014ab3.1619155","order":9,"width":"1","height":"1","passthru":false,"label":"","tooltip":"","color":"","bgcolor":"","icon":"publish","payload":"{\"mode\":\"center\"}","payloadType":"json","topic":"","x":170,"y":300,"wires":[["ac71139f.2a222"]]},{"id":"811db4cb.4e63d8","type":"ui_button","z":"7f002a1.65477d4","name":"right","group":"1014ab3.1619155","order":10,"width":"1","height":"1","passthru":false,"label":"","tooltip":"","color":"","bgcolor":"","icon":"skip_next","payload":"{\"mode\":\"right\"}","payloadType":"json","topic":"","x":170,"y":360,"wires":[["ac71139f.2a222"]]},{"id":"a61206a2.8ba578","type":"ui_template","z":"7f002a1.65477d4","group":"1014ab3.1619155","name":"spacer","order":7,"width":"1","height":"1","format":"","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":170,"y":180,"wires":[[]]},{"id":"3601ca77.70bbf6","type":"comment","z":"7f002a1.65477d4","name":"IR Sensor","info":"","x":120,"y":440,"wires":[]},{"id":"7b89f93d.be59f8","type":"rpi-gpio in","z":"7f002a1.65477d4","name":"","pin":"12","intype":"tri","debounce":"25","read":true,"x":150,"y":580,"wires":[["435c4437.d9af1c","d203c941.e95908"]]},{"id":"435c4437.d9af1c","type":"ui_led","z":"7f002a1.65477d4","group":"1014ab3.1619155","order":15,"label":"","colorForValue":[{"color":"red","value":"0","valueType":"num"},{"color":"green","value":"1","valueType":"num"}],"name":"","x":470,"y":580,"wires":[]},{"id":"98e37a6e.504ac8","type":"ui_chart","z":"7f002a1.65477d4","name":"","group":"1014ab3.1619155","order":16,"width":"5","height":"2","label":"","chartType":"line","legend":"false","xformat":"ss","interpolate":"step","nodata":"waiting","dot":false,"ymin":"1","ymax":"0","removeOlder":"5","removeOlderPoints":"","removeOlderUnit":"1","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":1,"x":470,"y":640,"wires":[[]]},{"id":"f43c8b35.dbc948","type":"ui_template","z":"7f002a1.65477d4","group":"1014ab3.1619155","name":"Heading: Servo","order":6,"width":"5","height":"1","format":"<div><font color=\"#0EB8C0\" style=\"font-size:19px;\">Servo bewegen:</font></div>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":200,"y":140,"wires":[[]]},{"id":"20a84ea6.b8b722","type":"ui_template","z":"7f002a1.65477d4","group":"1014ab3.1619155","name":"Heading: IR","order":12,"width":"3","height":"1","format":"<div><font color=\"#0EB8C0\" style=\"font-size:19px;\">IR Sensor:</font></div>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":170,"y":520,"wires":[[]]},{"id":"de13a364.df4b8","type":"ui_template","z":"7f002a1.65477d4","group":"1014ab3.1619155","name":"spacer","order":11,"width":"5","height":"1","format":"","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":150,"y":480,"wires":[[]]},{"id":"21c016ae.3051ea","type":"ui_template","z":"7f002a1.65477d4","group":"1014ab3.1619155","name":"spacer","order":5,"width":"5","height":"1","format":"","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":170,"y":100,"wires":[[]]},{"id":"d203c941.e95908","type":"function","z":"7f002a1.65477d4","name":"invert","func":"if (msg.payload === 1){\n    msg.payload = 0;\n} else {\n    msg.payload = 1;\n}\n\nreturn msg;","outputs":1,"noerr":0,"x":310,"y":640,"wires":[["98e37a6e.504ac8","55b1cb7.bd60834"]]},{"id":"c15ee026.e288a","type":"comment","z":"f6015da6.313ed","name":"Kamera: je nach Netzwerk IP ändern","info":"","x":210,"y":60,"wires":[]},{"id":"26afec92.8fb184","type":"ui_template","z":"f6015da6.313ed","group":"3ffd1743.99a448","name":"spacer","order":1,"width":"1","height":"1","format":"","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":190,"y":220,"wires":[[]]},{"id":"7aaf85a5.6e63fc","type":"function","z":"7f002a1.65477d4","name":"prepare publish","func":"msg.payload = \"Steine gezählt: \"+msg.count;\nreturn msg;","outputs":1,"noerr":0,"x":840,"y":680,"wires":[["5874ed49.d8d844"]]},{"id":"5874ed49.d8d844","type":"mqtt out","z":"7f002a1.65477d4","name":"","topic":"pdp/IR","qos":"0","retain":"","broker":"eb26bc07.ee25f","x":1010,"y":680,"wires":[]},{"id":"202d3c0f.ec7104","type":"comment","z":"f6015da6.313ed","name":"Home: 192.168.0.30","info":"","x":230,"y":100,"wires":[]},{"id":"f3a944b6.df4b28","type":"comment","z":"f6015da6.313ed","name":"Hotspot: 192.168.1.87","info":"","x":240,"y":140,"wires":[]},{"id":"761c0972.c8c508","type":"ui_button","z":"3ca10133.d4a53e","name":"schneller","group":"a39175e6.3c3778","order":10,"width":"1","height":"1","passthru":false,"label":"","tooltip":"","color":"","bgcolor":"","icon":"fa-forward","payload":"speed","payloadType":"flow","topic":"pdp/dcmotor1","x":640,"y":700,"wires":[["fdd29a93.2f6208"]]},{"id":"1fc75ce7.e95a63","type":"change","z":"3ca10133.d4a53e","name":"speed","rules":[{"t":"set","p":"speed","pt":"flow","to":"payload","tot":"msg"},{"t":"set","p":"payload","pt":"msg","to":"{\"speed\":\"20\",\"mode\":\"speed\"}","tot":"json"},{"t":"set","p":"payload.speed","pt":"msg","to":"speed","tot":"flow"}],"action":"","property":"","from":"","to":"","reg":false,"x":970,"y":720,"wires":[["94f85750.2f3608"]]},{"id":"fdd29a93.2f6208","type":"function","z":"3ca10133.d4a53e","name":"faster","func":"msg.payload = msg.payload + 5\nreturn msg;","outputs":1,"noerr":0,"x":790,"y":700,"wires":[["1fc75ce7.e95a63"]]},{"id":"2dbccb74.cc3104","type":"ui_button","z":"3ca10133.d4a53e","name":"langsamer","group":"a39175e6.3c3778","order":8,"width":"1","height":"1","passthru":false,"label":"","tooltip":"","color":"","bgcolor":"","icon":"fa-backward","payload":"speed","payloadType":"flow","topic":"pdp/dcmotor1","x":650,"y":780,"wires":[["1640c312.ef7c0d"]]},{"id":"1640c312.ef7c0d","type":"function","z":"3ca10133.d4a53e","name":"slower","func":"msg.payload = msg.payload - 5\nreturn msg;","outputs":1,"noerr":0,"x":790,"y":780,"wires":[["1fc75ce7.e95a63"]]},{"id":"479115c8.686dcc","type":"ui_template","z":"3ca10133.d4a53e","group":"a39175e6.3c3778","name":"spacer","order":7,"width":"1","height":"1","format":"","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":630,"y":660,"wires":[[]]},{"id":"ae60efa4.e7d01","type":"ui_template","z":"3ca10133.d4a53e","group":"a39175e6.3c3778","name":"spacer","order":11,"width":"1","height":"1","format":"","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":630,"y":820,"wires":[[]]},{"id":"b8c7cdb3.3e0df","type":"ui_template","z":"3ca10133.d4a53e","group":"a39175e6.3c3778","name":"spacer","order":9,"width":"1","height":"1","format":"","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":630,"y":740,"wires":[[]]},{"id":"3a90e6a.4173d1a","type":"hostip","z":"f6015da6.313ed","name":"Host IP","x":940,"y":220,"wires":[["e0412ceb.60541"]]},{"id":"20676409.2f6e0c","type":"ui_template","z":"3ca10133.d4a53e","group":"a39175e6.3c3778","name":"spacer","order":4,"width":"5","height":"1","format":"","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":530,"y":480,"wires":[[]]},{"id":"cb16b01f.bae6e","type":"ui_template","z":"3ca10133.d4a53e","group":"a39175e6.3c3778","name":"spacer","order":12,"width":"5","height":"1","format":"","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":530,"y":80,"wires":[[]]},{"id":"7bcdc866.c20548","type":"ui_template","z":"3ca10133.d4a53e","group":"a39175e6.3c3778","name":"spacer","order":6,"width":"5","height":"1","format":"","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":630,"y":600,"wires":[[]]},{"id":"99e1476b.222908","type":"ui_switch","z":"c5819a96.39f7d8","name":"","label":"DC2 On/Off","tooltip":"","group":"a98b67a2.f023a8","order":5,"width":"0","height":"0","passthru":true,"decouple":"false","topic":"pdp/dcmotor2","style":"","onvalue":"true","onvalueType":"bool","onicon":"power_settings_new","oncolor":"green","offvalue":"false","offvalueType":"bool","officon":"power_settings_new","offcolor":"red","x":530,"y":540,"wires":[["54975c4.7248ea4"]]},{"id":"54975c4.7248ea4","type":"function","z":"c5819a96.39f7d8","name":"Off/On","func":"if (msg.payload === true) {\n    return [msg,null];\n} else if (msg.payload === false) {\n    return [null,msg];\n}","outputs":2,"noerr":0,"x":730,"y":540,"wires":[["272aa177.de906e"],["267e2609.1548da"]]},{"id":"272aa177.de906e","type":"change","z":"c5819a96.39f7d8","name":"On","rules":[{"t":"set","p":"payload","pt":"msg","to":"{\"dir\":\"cw\",\"speed\":20,\"acc\":2.5,\"mode\":\"start\"}","tot":"json"},{"t":"set","p":"payload.speed","pt":"msg","to":"speed","tot":"flow"},{"t":"set","p":"payload.acc","pt":"msg","to":"acc","tot":"flow"},{"t":"set","p":"payload.dir","pt":"msg","to":"dir","tot":"flow"}],"action":"","property":"","from":"","to":"","reg":false,"x":950,"y":500,"wires":[["14048a2b.8c1756"]]},{"id":"267e2609.1548da","type":"change","z":"c5819a96.39f7d8","name":"Off","rules":[{"t":"set","p":"payload","pt":"msg","to":"{\"speed\":0,\"mode\":\"stop\"}","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":950,"y":560,"wires":[["14048a2b.8c1756"]]},{"id":"14048a2b.8c1756","type":"mqtt out","z":"c5819a96.39f7d8","name":"","topic":"","qos":"0","retain":"","broker":"eb26bc07.ee25f","x":1190,"y":540,"wires":[]},{"id":"7caf0c9e.2ec3f4","type":"ui_slider","z":"c5819a96.39f7d8","name":"speed","label":"Speed:","tooltip":"","group":"a98b67a2.f023a8","order":1,"width":0,"height":0,"passthru":false,"outs":"end","topic":"pdp/dcmotor2","min":"0","max":"100","step":"1","x":510,"y":240,"wires":[["567cab65.e38954"]],"inputLabels":["msg.payload.speed"]},{"id":"5823d861.b8b158","type":"ui_gauge","z":"c5819a96.39f7d8","name":"","group":"a98b67a2.f023a8","order":13,"width":0,"height":0,"gtype":"gage","title":"Geschwindigkeit:","label":"%","format":"{{value}}","min":0,"max":"100","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":550,"y":140,"wires":[]},{"id":"e334058f.8e5238","type":"comment","z":"c5819a96.39f7d8","name":"DC Motor 2","info":"","x":110,"y":60,"wires":[]},{"id":"bf7d7e09.167f2","type":"mqtt in","z":"c5819a96.39f7d8","name":"","topic":"pdp/dcmotor2","qos":"0","datatype":"json","broker":"eb26bc07.ee25f","x":110,"y":140,"wires":[["5b9ca410.50465c"]]},{"id":"5b9ca410.50465c","type":"change","z":"c5819a96.39f7d8","name":"query speed","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.speed","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":310,"y":140,"wires":[["5823d861.b8b158","7caf0c9e.2ec3f4"]]},{"id":"567cab65.e38954","type":"change","z":"c5819a96.39f7d8","name":"flow.speed, flow.mode","rules":[{"t":"set","p":"speed","pt":"flow","to":"payload","tot":"msg"},{"t":"set","p":"mode","pt":"flow","to":"speed","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":700,"y":240,"wires":[[]]},{"id":"def10da6.43174","type":"ui_slider","z":"c5819a96.39f7d8","name":"acc","label":"Beschleunigung:","tooltip":"","group":"a98b67a2.f023a8","order":2,"width":0,"height":0,"passthru":false,"outs":"end","topic":"","min":"0","max":"3","step":"0.5","x":510,"y":300,"wires":[["d7c868be.b34ba8"]],"inputLabels":["msg.payload.speed"]},{"id":"d7c868be.b34ba8","type":"change","z":"c5819a96.39f7d8","name":"","rules":[{"t":"set","p":"acc","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":680,"y":300,"wires":[[]]},{"id":"75a4cef9.c5b9c","type":"ui_switch","z":"c5819a96.39f7d8","name":"dir","label":"Richtung:","tooltip":"","group":"a98b67a2.f023a8","order":3,"width":"5","height":"1","passthru":false,"decouple":"false","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"update","oncolor":"green","offvalue":"false","offvalueType":"bool","officon":"restore","offcolor":"orange","x":510,"y":360,"wires":[["cdf090df.6aded"]]},{"id":"cdf090df.6aded","type":"switch","z":"c5819a96.39f7d8","name":"","property":"payload","propertyType":"msg","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":650,"y":360,"wires":[["3868d701.414198"],["e5c81220.ba966"]]},{"id":"3868d701.414198","type":"change","z":"c5819a96.39f7d8","name":"","rules":[{"t":"set","p":"dir","pt":"flow","to":"cw","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":810,"y":340,"wires":[[]]},{"id":"e5c81220.ba966","type":"change","z":"c5819a96.39f7d8","name":"","rules":[{"t":"set","p":"dir","pt":"flow","to":"ccw","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":810,"y":380,"wires":[[]]},{"id":"25e661f1.67ae0e","type":"ui_button","z":"c5819a96.39f7d8","name":"schneller","group":"a98b67a2.f023a8","order":10,"width":"1","height":"1","passthru":false,"label":"","tooltip":"","color":"","bgcolor":"","icon":"fa-forward","payload":"speed","payloadType":"flow","topic":"pdp/dcmotor2","x":620,"y":700,"wires":[["1fe74298.c918dd"]]},{"id":"71f58964.453fc8","type":"change","z":"c5819a96.39f7d8","name":"speed","rules":[{"t":"set","p":"speed","pt":"flow","to":"payload","tot":"msg"},{"t":"set","p":"payload","pt":"msg","to":"{\"speed\":\"20\",\"mode\":\"speed\"}","tot":"json"},{"t":"set","p":"payload.speed","pt":"msg","to":"speed","tot":"flow"}],"action":"","property":"","from":"","to":"","reg":false,"x":950,"y":720,"wires":[["14048a2b.8c1756"]]},{"id":"1fe74298.c918dd","type":"function","z":"c5819a96.39f7d8","name":"faster","func":"msg.payload = msg.payload + 5\nreturn msg;","outputs":1,"noerr":0,"x":770,"y":700,"wires":[["71f58964.453fc8"]]},{"id":"3f6130a3.a8378","type":"ui_button","z":"c5819a96.39f7d8","name":"langsamer","group":"a98b67a2.f023a8","order":8,"width":"1","height":"1","passthru":false,"label":"","tooltip":"","color":"","bgcolor":"","icon":"fa-backward","payload":"speed","payloadType":"flow","topic":"pdp/dcmotor2","x":630,"y":780,"wires":[["e1e165e.22ca298"]]},{"id":"e1e165e.22ca298","type":"function","z":"c5819a96.39f7d8","name":"slower","func":"msg.payload = msg.payload - 5\nreturn msg;","outputs":1,"noerr":0,"x":770,"y":780,"wires":[["71f58964.453fc8"]]},{"id":"32c5d408.430eac","type":"ui_template","z":"c5819a96.39f7d8","group":"a98b67a2.f023a8","name":"spacer","order":7,"width":"1","height":"1","format":"","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":610,"y":660,"wires":[[]]},{"id":"325db61d.da768a","type":"ui_template","z":"c5819a96.39f7d8","group":"a98b67a2.f023a8","name":"spacer","order":11,"width":"1","height":"1","format":"","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":610,"y":820,"wires":[[]]},{"id":"2699424c.dba6de","type":"ui_template","z":"c5819a96.39f7d8","group":"a98b67a2.f023a8","name":"spacer","order":9,"width":"1","height":"1","format":"","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":610,"y":740,"wires":[[]]},{"id":"6ff1d2f6.fa67bc","type":"ui_template","z":"c5819a96.39f7d8","group":"a98b67a2.f023a8","name":"spacer","order":4,"width":"5","height":"1","format":"","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":510,"y":480,"wires":[[]]},{"id":"b81587e3.425258","type":"ui_template","z":"c5819a96.39f7d8","group":"a98b67a2.f023a8","name":"spacer","order":12,"width":"5","height":"1","format":"","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":510,"y":80,"wires":[[]]},{"id":"410d232e.912e9c","type":"ui_template","z":"c5819a96.39f7d8","group":"a98b67a2.f023a8","name":"spacer","order":6,"width":"5","height":"1","format":"","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":610,"y":600,"wires":[[]]},{"id":"bcb455ee.383a68","type":"counter","z":"7f002a1.65477d4","name":"","init":"0","step":"1","lower":null,"upper":null,"mode":"increment","outputs":1,"x":660,"y":740,"wires":[["c8adc85f.1d47b8","7aaf85a5.6e63fc"]]},{"id":"55b1cb7.bd60834","type":"function","z":"7f002a1.65477d4","name":"increment","func":"if (msg.payload === 1) {\n    msg.increment = 1;\n    return msg;\n}","outputs":1,"noerr":0,"x":480,"y":740,"wires":[["bcb455ee.383a68"]]},{"id":"c8adc85f.1d47b8","type":"ui_text","z":"7f002a1.65477d4","group":"1014ab3.1619155","order":13,"width":"3","height":"1","name":"","label":"Counter","format":"{{msg.count}}","layout":"row-spread","x":820,"y":740,"wires":[]},{"id":"690a54b1.eef03c","type":"ui_button","z":"7f002a1.65477d4","name":"reset","group":"1014ab3.1619155","order":14,"width":"2","height":"1","passthru":false,"label":"","tooltip":"","color":"","bgcolor":"","icon":"fa-refresh","payload":"0","payloadType":"num","topic":"","x":330,"y":800,"wires":[["2d718313.17b2bc"]]},{"id":"2d718313.17b2bc","type":"change","z":"7f002a1.65477d4","name":"msg.reset","rules":[{"t":"set","p":"reset","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":480,"y":800,"wires":[["bcb455ee.383a68"]]},{"id":"4a08394a.133a28","type":"ui_switch","z":"8d2fdd3e.1a9b1","name":"dir","label":"Richtung:","tooltip":"","group":"1014ab3.1619155","order":1,"width":"5","height":"1","passthru":false,"decouple":"false","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"update","oncolor":"green","offvalue":"false","offvalueType":"bool","officon":"restore","offcolor":"orange","x":450,"y":160,"wires":[["f97c547f.0d2c08"]]},{"id":"f97c547f.0d2c08","type":"switch","z":"8d2fdd3e.1a9b1","name":"","property":"payload","propertyType":"msg","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":590,"y":160,"wires":[["e469da8a.185138"],["3a86e125.3d921e"]]},{"id":"3a86e125.3d921e","type":"change","z":"8d2fdd3e.1a9b1","name":"","rules":[{"t":"set","p":"dir","pt":"flow","to":"ccw","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":750,"y":180,"wires":[[]]},{"id":"e469da8a.185138","type":"change","z":"8d2fdd3e.1a9b1","name":"","rules":[{"t":"set","p":"dir","pt":"flow","to":"cw","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":750,"y":140,"wires":[[]]},{"id":"59a90cea.812664","type":"switch","z":"8d2fdd3e.1a9b1","name":"","property":"dir","propertyType":"flow","rules":[{"t":"nnull"},{"t":"null"}],"checkall":"false","repair":false,"outputs":2,"x":1310,"y":300,"wires":[["c8db0fc3.b2a1a"],["9e28f7fa.71b118"]]},{"id":"c8db0fc3.b2a1a","type":"change","z":"8d2fdd3e.1a9b1","name":"if flow.dir","rules":[{"t":"set","p":"payload.dir","pt":"msg","to":"dir","tot":"flow"}],"action":"","property":"","from":"","to":"","reg":false,"x":1460,"y":280,"wires":[["9e28f7fa.71b118"]]},{"id":"891f02e1.2fb1d","type":"switch","z":"8d2fdd3e.1a9b1","name":"","property":"dir","propertyType":"flow","rules":[{"t":"null"},{"t":"nnull"}],"checkall":"false","repair":false,"outputs":2,"x":1390,"y":440,"wires":[["9e28f7fa.71b118"],["a1acb404.e50718"]]},{"id":"a1acb404.e50718","type":"change","z":"8d2fdd3e.1a9b1","name":"if flow.dir","rules":[{"t":"set","p":"payload.dir","pt":"msg","to":"dir","tot":"flow"}],"action":"","property":"","from":"","to":"","reg":false,"x":1560,"y":440,"wires":[["9e28f7fa.71b118"]]},{"id":"a4549dd9.dce8e","type":"inject","z":"8d2fdd3e.1a9b1","name":"prg1 ausführen","topic":"pdp/stepper","payload":"{\"mode\":\"prg1\",\"steps\":90}","payloadType":"json","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1500,"y":120,"wires":[["9e28f7fa.71b118"]]},{"id":"e92b4cad.307be","type":"mqtt out","z":"d817750.1785d88","name":"","topic":"","qos":"0","retain":"","broker":"eb26bc07.ee25f","x":590,"y":400,"wires":[]},{"id":"cc9ce052.4b495","type":"ui_button","z":"d817750.1785d88","name":"","group":"1014ab3.1619155","order":4,"width":0,"height":0,"passthru":false,"label":"Stepper PRG1 ausführen","tooltip":"","color":"","bgcolor":"","icon":"","payload":"{\"mode\":\"prg1\",\"steps\":90}","payloadType":"json","topic":"pdp/stepper","x":330,"y":400,"wires":[["e92b4cad.307be"]]},{"id":"7b1543e6.e0b71c","type":"inject","z":"d817750.1785d88","name":"Stepper OFF","topic":"pdp/stepper","payload":"{\"mode\":\"stop\"}","payloadType":"json","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":330,"y":160,"wires":[["e92b4cad.307be"]]},{"id":"2d1e0184.0fde0e","type":"inject","z":"d817750.1785d88","name":"100 cw","topic":"pdp/stepper","payload":"{\"mode\":\"move\",\"dir\":\"cw\",\"steps\":100}","payloadType":"json","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":310,"y":220,"wires":[["e92b4cad.307be"]]},{"id":"a7d12e70.bd32e","type":"inject","z":"d817750.1785d88","name":"100 ccw","topic":"pdp/stepper","payload":"{\"mode\":\"move\",\"dir\":\"ccw\",\"steps\":100}","payloadType":"json","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":320,"y":300,"wires":[["e92b4cad.307be"]]},{"id":"620936b3.1adef8","type":"inject","z":"d817750.1785d88","name":"10 cw","topic":"pdp/stepper","payload":"{\"mode\":\"move\",\"dir\":\"cw\",\"steps\":10}","payloadType":"json","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":310,"y":260,"wires":[["e92b4cad.307be"]]},{"id":"23924aa9.a5d646","type":"inject","z":"d817750.1785d88","name":"10 ccw","topic":"pdp/stepper","payload":"{\"mode\":\"move\",\"dir\":\"ccw\",\"steps\":10}","payloadType":"json","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":310,"y":340,"wires":[["e92b4cad.307be"]]},{"id":"f2fe5617.a43d08","type":"delay","z":"5dde010c.81a4","name":"Stop delay","pauseType":"delay","timeout":"5","timeoutUnits":"minutes","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":470,"y":260,"wires":[["2ec055cb.7969ba","4e019d59.2f2504"]]},{"id":"53aa8125.1ef81","type":"ui_button","z":"5dde010c.81a4","name":"","group":"1014ab3.1619155","order":4,"width":0,"height":0,"passthru":false,"label":"Programm 1","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":130,"y":480,"wires":[["76b0fe9.fab31","ccff2ad7.dc1e28","f2fe5617.a43d08","b6b91d5b.05f34","a6d86b59.fcda08","b9071fc7.dadc9","8be7b5fb.e2a748","d7dd1f79.956e","cb1d927c.8fca3","32c3ea69.beb0e6","32187969.b0cd86","51bb86ad.3e4018","a277fff3.12884","3087b1b7.bab51e","77f3d01c.7c228"]]},{"id":"a040f802.88be18","type":"mqtt out","z":"5dde010c.81a4","name":"","topic":"","qos":"0","retain":"","broker":"eb26bc07.ee25f","x":890,"y":180,"wires":[]},{"id":"76b0fe9.fab31","type":"change","z":"5dde010c.81a4","name":"Start DC1","rules":[{"t":"set","p":"payload","pt":"msg","to":"{\"mode\":\"start\",\"speed\":42,\"dir\":\"cw\",\"acc\":1}","tot":"json"},{"t":"set","p":"topic","pt":"msg","to":"pdp/dc1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":460,"y":140,"wires":[["a040f802.88be18"]]},{"id":"ccff2ad7.dc1e28","type":"change","z":"5dde010c.81a4","name":"Start DC2","rules":[{"t":"set","p":"payload","pt":"msg","to":"{\"mode\":\"start\",\"speed\":42,\"dir\":\"cw\",\"acc\":1}","tot":"json"},{"t":"set","p":"topic","pt":"msg","to":"pdp/dc2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":460,"y":180,"wires":[["a040f802.88be18"]]},{"id":"2ec055cb.7969ba","type":"change","z":"5dde010c.81a4","name":"Stop DC1","rules":[{"t":"set","p":"payload","pt":"msg","to":"{\"mode\":\"stop\"}","tot":"json"},{"t":"set","p":"topic","pt":"msg","to":"pdp/dc1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":660,"y":240,"wires":[["a040f802.88be18"]]},{"id":"4e019d59.2f2504","type":"change","z":"5dde010c.81a4","name":"Stop DC2","rules":[{"t":"set","p":"payload","pt":"msg","to":"{\"mode\":\"stop\"}","tot":"json"},{"t":"set","p":"topic","pt":"msg","to":"pdp/dc2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":660,"y":280,"wires":[["a040f802.88be18"]]},{"id":"da59ad1f.d460f","type":"change","z":"5dde010c.81a4","name":"Start Stepper","rules":[{"t":"set","p":"payload","pt":"msg","to":"{\"mode\":\"prg1\",\"steps\":90}","tot":"json"},{"t":"set","p":"topic","pt":"msg","to":"pdp/stepper","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":710,"y":520,"wires":[["44626493.a787dc"]]},{"id":"b6b91d5b.05f34","type":"delay","z":"5dde010c.81a4","name":"delay 1","pauseType":"delay","timeout":"30","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":460,"y":360,"wires":[["da59ad1f.d460f"]]},{"id":"44626493.a787dc","type":"mqtt out","z":"5dde010c.81a4","name":"","topic":"","qos":"0","retain":"","broker":"eb26bc07.ee25f","x":890,"y":520,"wires":[]},{"id":"a6d86b59.fcda08","type":"delay","z":"5dde010c.81a4","name":"delay 1","pauseType":"delay","timeout":"60","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":460,"y":400,"wires":[["da59ad1f.d460f"]]},{"id":"b9071fc7.dadc9","type":"delay","z":"5dde010c.81a4","name":"delay 1","pauseType":"delay","timeout":"90","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":460,"y":440,"wires":[["da59ad1f.d460f"]]},{"id":"8be7b5fb.e2a748","type":"delay","z":"5dde010c.81a4","name":"delay 1","pauseType":"delay","timeout":"120","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":460,"y":480,"wires":[["da59ad1f.d460f"]]},{"id":"d7dd1f79.956e","type":"delay","z":"5dde010c.81a4","name":"delay 1","pauseType":"delay","timeout":"150","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":460,"y":520,"wires":[["da59ad1f.d460f"]]},{"id":"cb1d927c.8fca3","type":"delay","z":"5dde010c.81a4","name":"delay 1","pauseType":"delay","timeout":"180","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":460,"y":560,"wires":[["da59ad1f.d460f"]]},{"id":"32c3ea69.beb0e6","type":"delay","z":"5dde010c.81a4","name":"delay 1","pauseType":"delay","timeout":"210","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":460,"y":600,"wires":[["da59ad1f.d460f"]]},{"id":"32187969.b0cd86","type":"delay","z":"5dde010c.81a4","name":"delay 1","pauseType":"delay","timeout":"240","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":460,"y":640,"wires":[["da59ad1f.d460f"]]},{"id":"51bb86ad.3e4018","type":"delay","z":"5dde010c.81a4","name":"delay 1","pauseType":"delay","timeout":"270","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":460,"y":680,"wires":[["da59ad1f.d460f"]]},{"id":"842baa2c.f2c288","type":"mqtt out","z":"5dde010c.81a4","name":"","topic":"","qos":"0","retain":"","broker":"eb26bc07.ee25f","x":890,"y":800,"wires":[]},{"id":"a277fff3.12884","type":"delay","z":"5dde010c.81a4","name":"delay 1","pauseType":"delay","timeout":"280","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":460,"y":760,"wires":[["de0c608c.c67ea"]]},{"id":"de0c608c.c67ea","type":"change","z":"5dde010c.81a4","name":"Stepper up","rules":[{"t":"set","p":"payload","pt":"msg","to":"{\"mode\":\"move\",\"dir\":\"ccw\",\"steps\":10}","tot":"json"},{"t":"set","p":"topic","pt":"msg","to":"pdp/stepper","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":710,"y":800,"wires":[["842baa2c.f2c288"]]},{"id":"3087b1b7.bab51e","type":"delay","z":"5dde010c.81a4","name":"delay 1","pauseType":"delay","timeout":"290","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":460,"y":800,"wires":[["de0c608c.c67ea"]]},{"id":"77f3d01c.7c228","type":"delay","z":"5dde010c.81a4","name":"delay 1","pauseType":"delay","timeout":"295","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":460,"y":840,"wires":[["de0c608c.c67ea"]]},{"id":"8953f46.0c10f08","type":"ui_template","z":"41e722ef.1e830c","group":"c89fbd89.04161","name":"Keyshot XR","order":6,"width":"10","height":"8","format":"<div style=\"max-width: 600px; max-height: 439px;\">\n  <div style=\"left: 0px; width: 100%; height: 0px; position: relative; padding-bottom: 73.1667%; overflow: hidden;\">\n    <iframe src=\"/CSS/Turntable.html\"\n                 allowfullscreen\n                 style=\"position: absolute; top: 0px; left: 0px; height: 100%; width: 1px; min-width: 100%; *width: 100%;\"\n                 frameborder=\"0\"\n                 scrolling=\"no\">\n    </iframe>\n  </div>\n</div>\n\n\n","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":210,"y":740,"wires":[[]]},{"id":"dae9b341.aa674","type":"ui_template","z":"41e722ef.1e830c","group":"d75718a5.d4f158","name":"CSS","order":2,"width":"1","height":"1","format":"<style>\n\n    body {\n        background-image: url(\"/CSS/Background.jpg\");\n        background-color: #cccccc;\n    }\n    \n    .md-toolbar-tools {\n        background-color: #333333;\n        height: 120px;\n    }\n    \n    #logo {  width: 84px; height: 84px; } \n    \n    #GUI_CSS { width: 0px; visibility: hidden; }\n    \n    #GUI_Status { height: 900px; }\n    \n    #GUI_Steuerung { height: 900px; }\n    \n    #GUI_Analyse  { height: 900px; }\n    \n    .placeholderkamera {\n        width: 100%;\n        height: 400px;\n        background-repeat: no-repeat;\n        background-size: contain;\n        background-image: url('/CSS/placeholder_kamera.png');\n        overflow: hidden;\n    }\n    \n    .placeholderopencv {\n        width: 100%;\n        height: 390px;\n        background-repeat: no-repeat;\n        background-size: contain;\n        background-image: url('/CSS/placeholder_opencv.png');\n        overflow: hidden;\n    }\n    \n</style>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":190,"y":140,"wires":[[]]},{"id":"5a8deb12.878e44","type":"ui_template","z":"41e722ef.1e830c","group":"d75718a5.d4f158","name":"head","order":1,"width":0,"height":0,"format":"<link rel=\"icon\" sizes=\"192x192\" href=\"/CSS/theshaker192x192.png\">\n<link rel=\"shortcut icon\" type=\"image/png\" href=\"/CSS/theshaker64x64.png\">\n<link rel=\"apple-touch-icon\" href=\"/CSS/theshaker120x120.png\">","storeOutMessages":true,"fwdInMessages":true,"templateScope":"global","x":190,"y":100,"wires":[[]]},{"id":"a3cbde47.bbc08","type":"ui_button","z":"41e722ef.1e830c","name":"","group":"c89fbd89.04161","order":1,"width":"0","height":"0","passthru":false,"label":"Programm Starten","tooltip":"Prozess Starten. Sicherstellen, dass sich Steine im AuffangbehÃ¤lter befinden.","color":"","bgcolor":"","icon":"fa-play","payload":"","payloadType":"str","topic":"","x":230,"y":580,"wires":[["77554614.811c08"]]},{"id":"49e10d62.04a864","type":"ui_button","z":"41e722ef.1e830c","name":"","group":"c89fbd89.04161","order":3,"width":0,"height":0,"passthru":false,"label":"Programm Stoppen","tooltip":"Den Prozess Stoppen","color":"","bgcolor":"","icon":"fa-stop","payload":"","payloadType":"str","topic":"","x":230,"y":660,"wires":[["802c010c.7b5bb"]]},{"id":"4c30cd4c.e8a604","type":"comment","z":"41e722ef.1e830c","name":"Steuerung","info":"","x":120,"y":520,"wires":[]},{"id":"802c010c.7b5bb","type":"ui_toast","z":"41e722ef.1e830c","position":"dialog","displayTime":"3","highlight":"","outputs":1,"ok":"Ja","cancel":"Nein","topic":"Wollen Sie das Programm unwiederruflich stoppen?","name":"Bestätigung","x":450,"y":660,"wires":[["8276189d.52efc8"]]},{"id":"8276189d.52efc8","type":"ui_toast","z":"41e722ef.1e830c","position":"top right","displayTime":"3","highlight":"","outputs":0,"ok":"OK","cancel":"","topic":"Programm stoppen:","name":"stop","x":650,"y":660,"wires":[]},{"id":"5398c0f.c1ef94","type":"ui_toast","z":"41e722ef.1e830c","position":"top right","displayTime":"3","highlight":"","outputs":0,"ok":"OK","cancel":"","topic":"Programm pausiert:","name":"pause","x":650,"y":620,"wires":[]},{"id":"7b90cdfa.42a4c4","type":"ui_button","z":"41e722ef.1e830c","name":"","group":"c89fbd89.04161","order":2,"width":0,"height":0,"passthru":false,"label":"Programm pausieren / fortsetzen","tooltip":"","color":"","bgcolor":"","icon":"fa-pause","payload":"","payloadType":"str","topic":"","x":280,"y":620,"wires":[["5398c0f.c1ef94"]]},{"id":"77554614.811c08","type":"ui_toast","z":"41e722ef.1e830c","position":"top right","displayTime":"3","highlight":"","outputs":0,"ok":"OK","cancel":"","topic":"Programm gestartet.","name":"start","x":650,"y":580,"wires":[]},{"id":"3c02e262.52dcfe","type":"comment","z":"41e722ef.1e830c","name":"Analyse","info":"","x":110,"y":800,"wires":[]},{"id":"fdcb3f6d.3bb23","type":"comment","z":"41e722ef.1e830c","name":"Status:","info":"","x":110,"y":280,"wires":[]},{"id":"984d7eb3.71394","type":"comment","z":"41e722ef.1e830c","name":"CSS Attribute","info":"","x":130,"y":40,"wires":[]},{"id":"9fb22ff4.c9076","type":"ui_chart","z":"41e722ef.1e830c","name":"","group":"1c8a0807.68bbe8","order":4,"width":0,"height":0,"label":"Steine pro Minute","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"0","ymax":"10","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":1,"x":230,"y":460,"wires":[[]]},{"id":"8604af04.71f68","type":"ui_gauge","z":"41e722ef.1e830c","name":"","group":"1c8a0807.68bbe8","order":3,"width":"10","height":"5","gtype":"gage","title":"Befüllungsstand:","label":"%","format":"{{value}}","min":0,"max":"100","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":230,"y":420,"wires":[]},{"id":"edf8fbe8.aef6c8","type":"ui_template","z":"41e722ef.1e830c","group":"d8a12027.2009b","name":"Foto: Kamera","order":2,"width":"10","height":"8","format":"<style>\n    #placeholder1 {\n        width: 100%;\n        height: 400px;\n        background-repeat: no-repeat;\n        background-size: contain;\n        background-image: url('/Pictures/calibrate.jpg?{{msg.payload}}');\n    }\n</style>\n\n<div class=\"placeholderkamera\">\n    <div id=\"placeholder1\"></div>\n</div>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":600,"y":900,"wires":[[]]},{"id":"ba5b3fa3.9461d","type":"ui_template","z":"41e722ef.1e830c","group":"d75718a5.d4f158","name":"Logo","order":3,"width":"0","height":"0","format":"<script id=\"titleScript\" type=\"text/javascript\">\n    \n    $('h1').remove();\n    \n    $('#titleScript').remove();\n    \n    $('#logo').remove();\n    var toolbar = $('.md-toolbar-tools');\n    var logo = $('<img src=\"/CSS/Logo.png\" id=\"logo\">');\n    \n    $('#titleScript').parent().hide();\n    toolbar.append(logo);\n</script>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":190,"y":180,"wires":[[]]},{"id":"55f18c05.4ed5d4","type":"ui_template","z":"41e722ef.1e830c","group":"d8a12027.2009b","name":"Foto: OpenCV","order":2,"width":"10","height":"8","format":"<style>\n    #placeholder2 {\n        width: 100%;\n        height: 400px;\n        background-repeat: no-repeat;\n        background-size: contain;\n        background-image: url('/Pictures/difference.jpg?{{msg.payload}}');\n    }\n</style>\n\n<div class=\"placeholderopencv\">\n    <div id=\"placeholder2\"></div>\n</div>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":600,"y":940,"wires":[[]]},{"id":"7c219127.9a88f","type":"ui_button","z":"41e722ef.1e830c","name":"","group":"c89fbd89.04161","order":4,"width":0,"height":0,"passthru":false,"label":"Stein hinzufügen","tooltip":"einen weiteren Stein nachschicken","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":230,"y":700,"wires":[[]]},{"id":"23dc5df8.178cb2","type":"ui_template","z":"41e722ef.1e830c","group":"d75718a5.d4f158","name":"Uhrzeit","order":4,"width":0,"height":0,"format":"<script id=\"titleScript\" type=\"text/javascript\">\n    $('#clock').remove();\n    var toolbar = $('.md-toolbar-tools');\n    var div = $('<div/>');\n    var p = $('<p/ id=\"clock\">');\n    \n    $('#titleScript').parent().hide();\n    div.append(p);\n    div[0].style.margin = '5px 5px 5px auto';\n    toolbar.append(div);\n\n    function displayTitle(lh) {\n        p.text(lh); \n    }\n    \n    function upTime() {\n        var d = new Date();\n        p.text(d.toLocaleTimeString('de-AT'));\n    }\n\n    \n\n    // Watch the payload and update the title\n    (function(scope) {\n        scope.$watch('msg.payload', function(data) {\n            displayTitle(data);\n        });\n        setInterval(upTime,1000);\n    })(scope);\n</script>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":200,"y":220,"wires":[[]]},{"id":"78f11d7a.efcd34","type":"ui_text","z":"41e722ef.1e830c","group":"1c8a0807.68bbe8","order":1,"width":"10","height":"1","name":"","label":"Status: ","format":"{{msg.payload}}","layout":"row-spread","x":200,"y":340,"wires":[]},{"id":"666be47b.26a70c","type":"ui_text","z":"41e722ef.1e830c","group":"1c8a0807.68bbe8","order":2,"width":"10","height":"1","name":"","label":"Status: ","format":"{{msg.payload}}","layout":"row-spread","x":200,"y":380,"wires":[]},{"id":"64906cea.df1434","type":"mqtt in","z":"41e722ef.1e830c","name":"","topic":"pdp/score","qos":"2","datatype":"auto","broker":"eb26bc07.ee25f","x":110,"y":920,"wires":[["84abeaf0.b38c48"]]},{"id":"84abeaf0.b38c48","type":"change","z":"41e722ef.1e830c","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"","tot":"date"}],"action":"","property":"","from":"","to":"","reg":false,"x":370,"y":920,"wires":[["edf8fbe8.aef6c8","55f18c05.4ed5d4"]]},{"id":"2eeea850.58fb18","type":"inject","z":"41e722ef.1e830c","name":"","topic":"","payload":"{\"mode\":\"calibrate\"}","payloadType":"json","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":310,"y":1120,"wires":[["6384b544.8cf6dc"]]},{"id":"3f19b1ee.3ac62e","type":"inject","z":"41e722ef.1e830c","name":"","topic":"","payload":"{\"mode\":\"compare\"}","payloadType":"json","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":310,"y":1180,"wires":[["6384b544.8cf6dc"]]},{"id":"6384b544.8cf6dc","type":"mqtt out","z":"41e722ef.1e830c","name":"","topic":"pdp/kamera","qos":"","retain":"","broker":"eb26bc07.ee25f","x":560,"y":1160,"wires":[]},{"id":"58563ff5.a6cff","type":"mqtt in","z":"41e722ef.1e830c","name":"","topic":"pdp/#","qos":"2","datatype":"auto","broker":"eb26bc07.ee25f","x":620,"y":1060,"wires":[["db6e2ef6.bc14"]]},{"id":"db6e2ef6.bc14","type":"debug","z":"41e722ef.1e830c","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":870,"y":1060,"wires":[]},{"id":"1dc6be73.2a2f22","type":"inject","z":"41e722ef.1e830c","name":"","topic":"","payload":"{\"mode\":\"calibrate\"}","payloadType":"json","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":510,"y":1260,"wires":[["1b2d4e50.c2d602"]]},{"id":"1b2d4e50.c2d602","type":"mqtt out","z":"41e722ef.1e830c","name":"","topic":"pdp/stepper","qos":"","retain":"","broker":"eb26bc07.ee25f","x":800,"y":1260,"wires":[]},{"id":"8ce9f1ee.34e1e","type":"inject","z":"41e722ef.1e830c","name":"","topic":"","payload":"{\"mode\":\"off\"}","payloadType":"json","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":490,"y":1300,"wires":[["1b2d4e50.c2d602"]]},{"id":"5df20ef3.bb3ad","type":"inject","z":"41e722ef.1e830c","name":"","topic":"","payload":"{\"mode\":\"move\",\"dir\":\"cw\",\"steps\":20}","payloadType":"json","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":480,"y":1340,"wires":[["1b2d4e50.c2d602"]]},{"id":"d2c053c.1fc4bb","type":"mqtt out","z":"41e722ef.1e830c","name":"","topic":"pdp/prg","qos":"","retain":"","broker":"eb26bc07.ee25f","x":770,"y":1460,"wires":[]},{"id":"7e3b4172.0f8f8","type":"inject","z":"41e722ef.1e830c","name":"","topic":"","payload":"{\"mode\":\"prg1\"}","payloadType":"json","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":560,"y":1460,"wires":[["d2c053c.1fc4bb"]]},{"id":"d594f9f5.a64b98","type":"inject","z":"41e722ef.1e830c","name":"","topic":"","payload":"{\"mode\":\"prg2\"}","payloadType":"json","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":560,"y":1520,"wires":[["d2c053c.1fc4bb"]]}]